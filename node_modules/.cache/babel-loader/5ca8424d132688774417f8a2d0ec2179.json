{"ast":null,"code":"import _defineProperty from \"/Users/arjunk/Downloads/ReactApp/React_NewsApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/arjunk/Downloads/ReactApp/React_NewsApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/arjunk/Downloads/ReactApp/React_NewsApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/arjunk/Downloads/ReactApp/React_NewsApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/arjunk/Downloads/ReactApp/React_NewsApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/arjunk/Downloads/ReactApp/React_NewsApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/arjunk/Downloads/ReactApp/React_NewsApp/src/components/Search/Search.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Consumer } from \"../../Context\"; //import \"./Search.css\";\n\nvar Search =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Search, _Component);\n\n  function Search() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Search)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      articles: [],\n      error: false,\n      toquery: \"\",\n      forCategory: \"general\",\n      forCountry: \"in\",\n      query: \"\",\n      CategoryValue: \"\",\n      CountryValue: \"\",\n      loadingcheck: true,\n      api_key: \"4305057cd3c74ce59b59f706e2a5bc52\",\n      //api_key: \"7de4507ef58c4118be7684e320da6328\",\n      heading: \"My News API\"\n    };\n\n    _this.findArticle = function (dispatch, e) {\n      e.preventDefault();\n      axios.get(\"https://newsapi.org/v2/top-headlines?country=\".concat(_this.state.forCountry, \"&q=\").concat(_this.state.toquery, \"&category=\").concat(_this.state.forCategory, \"&pageSize=20&apiKey=\").concat(_this.state.api_key)).then(function (res) {\n        dispatch({\n          type: \"SEARCH_NEWS\",\n          payload: res.data.articles\n        });\n        console.log(res.data);\n        console.log(\"https://newsapi.org/v2/top-headlines?country=\".concat(_this.state.forCountry, \"&q=\").concat(_this.state.toquery, \"&category=\").concat(_this.state.forCategory, \"&pageSize=20&apiKey=\").concat(_this.state.api_key));\n\n        _this.setState({\n          articles: res.data.articles,\n          loadingcheck: true\n        }, function () {\n          if (localStorage.getItem(\"backupdata\") === true) {\n            // init variable/set default variable for item\n            console.log(\" backupdata\");\n            console.log(localStorage.getItem(\"backupdata\"));\n          }\n\n          localStorage.setItem(\"backupdata\", JSON.stringify(_this.state.articles));\n          localStorage.setItem(\"forCountry\", _this.state.forCountry);\n          localStorage.setItem(\"forCategory\", _this.state.forCategory);\n          localStorage.setItem(\"toquery\", _this.state.toquery);\n          localStorage.setItem(\"CountryValue\", _this.state.CountryValue);\n          localStorage.setItem(\"CategoryValue\", _this.state.CategoryValue);\n          localStorage.setItem(\"query\", _this.state.query);\n        });\n      }).catch(function (err) {\n        console.log(err);\n\n        _this.setState({\n          error: err,\n          loadingcheck: true,\n          articles: JSON.parse(localStorage.getItem(\"backupdata\")),\n          forCountry: localStorage.getItem(\"forCountry\"),\n          forCategory: localStorage.getItem(\"forCategory\"),\n          toquery: localStorage.getItem(\"toquery\"),\n          CategoryValue: localStorage.getItem(\"CategoryValue\"),\n          CountryValue: localStorage.getItem(\"CountryValue\"),\n          query: localStorage.getItem(\"query\")\n        });\n      });\n    };\n\n    _this.onChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.handleCategoryDropdownChange = function (event) {\n      if (_this.state.error) {\n        alert(\"Connect to the Network\");\n      } else {\n        _this.setState({\n          loadingcheck: false\n        });\n\n        console.log(event.target.value);\n\n        _this.setState({\n          CategoryValue: event.target.value\n        }, function () {\n          console.log(_this.state.CategoryValue);\n\n          _this.setState({\n            forCategory: \"\".concat(_this.state.CategoryValue)\n          });\n        });\n      }\n    };\n\n    _this.handleCountryDropdownChange = function (event) {\n      if (_this.state.error) {\n        alert(\"Connect to the Network\");\n      } else {\n        _this.setState({\n          loadingcheck: false\n        });\n\n        console.log(event.target.value);\n\n        _this.setState({\n          CountryValue: event.target.value\n        }, function () {\n          console.log(_this.state.CountryValue);\n\n          _this.setState({\n            forCountry: \"\".concat(_this.state.CountryValue)\n          });\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var Category = [{\n        value: \"business\",\n        name: \"Business\"\n      }, {\n        value: \"entertainment\",\n        name: \"Entertainment\"\n      }, {\n        value: \"general\",\n        name: \"General\"\n      }, {\n        value: \"health\",\n        name: \"Health\"\n      }, {\n        value: \"science\",\n        name: \"Science\"\n      }, {\n        value: \"sports\",\n        name: \"Sports\"\n      }, {\n        value: \"technology\",\n        name: \"Technology\"\n      }];\n      var Country = [{\n        value: \"in\",\n        name: \"India\"\n      }, {\n        value: \"us\",\n        name: \"Usa\"\n      }, {\n        value: \"au\",\n        name: \"Australia\"\n      }, {\n        value: \"ca\",\n        name: \"Canada\"\n      }, {\n        value: \"ch\",\n        name: \"China\"\n      }];\n      return React.createElement(Consumer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, function (value) {\n        var dispatch = value.dispatch;\n        return React.createElement(\"div\", {\n          className: \"container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172\n          },\n          __self: this\n        }, React.createElement(\"form\", {\n          onSubmit: _this2.findArticle.bind(_this2, dispatch),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"form-row align-items-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-sm-3 my-1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        }, React.createElement(\"select\", {\n          className: \"form-control\",\n          name: \"CountryValue\",\n          value: _this2.state.CountryValue,\n          onChange: _this2.handleCountryDropdownChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176\n          },\n          __self: this\n        }, Country.map(function (o) {\n          return React.createElement(\"option\", {\n            key: o.value,\n            value: o.value,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 183\n            },\n            __self: this\n          }, o.name);\n        }))), React.createElement(\"div\", {\n          className: \"col-sm-3 my-1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189\n          },\n          __self: this\n        }, React.createElement(\"select\", {\n          className: \"form-control\",\n          name: \"CategoryValue\",\n          value: _this2.setState.CategoryValue,\n          onChange: _this2.handleCategoryDropdownChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          },\n          __self: this\n        }, Category.map(function (o) {\n          return React.createElement(\"option\", {\n            key: o.value,\n            value: o.value,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 197\n            },\n            __self: this\n          }, o.name);\n        })))), React.createElement(\"div\", {\n          className: \"form-row align-items-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-sm-3 my-1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          placeholder: \"Search\",\n          name: \"toquery\",\n          style: {\n            \"width\": \"100%\"\n          },\n          value: _this2.state.toquery,\n          onChange: _this2.onChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"col-sm-3 my-1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"btn btn-success form-control\",\n          style: {\n            \"width\": \"100%\"\n          },\n          type: \"submit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217\n          },\n          __self: this\n        }, \"Get Articles\")))));\n      });\n    }\n  }]);\n\n  return Search;\n}(Component);\n\nexport default Search;","map":{"version":3,"sources":["/Users/arjunk/Downloads/ReactApp/React_NewsApp/src/components/Search/Search.js"],"names":["React","Component","axios","Consumer","Search","state","articles","error","toquery","forCategory","forCountry","query","CategoryValue","CountryValue","loadingcheck","api_key","heading","findArticle","dispatch","e","preventDefault","get","then","res","type","payload","data","console","log","setState","localStorage","getItem","setItem","JSON","stringify","catch","err","parse","onChange","target","name","value","handleCategoryDropdownChange","event","alert","handleCountryDropdownChange","Category","Country","bind","map","o"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Consumer } from \"../../Context\";\n\n//import \"./Search.css\";\n\nclass Search extends Component {\n  state = {\n    articles: [],\n    error: false,\n    toquery: \"\",\n    forCategory: \"general\",\n    forCountry: \"in\",\n    query: \"\",\n    CategoryValue: \"\",\n    CountryValue: \"\",\n    loadingcheck: true,\n    api_key: \"4305057cd3c74ce59b59f706e2a5bc52\",\n    //api_key: \"7de4507ef58c4118be7684e320da6328\",\n    heading: \"My News API\"\n  };\n\n  findArticle = (dispatch, e) => {\n    e.preventDefault();\n\n    axios\n      .get(\n        `https://newsapi.org/v2/top-headlines?country=${\n          this.state.forCountry\n        }&q=${this.state.toquery}&category=${\n          this.state.forCategory\n        }&pageSize=20&apiKey=${this.state.api_key}`\n      )\n      .then(res => {\n        dispatch({\n          type: \"SEARCH_NEWS\",\n          payload: res.data.articles\n        });\n        console.log(res.data);\n        console.log(\n          `https://newsapi.org/v2/top-headlines?country=${\n            this.state.forCountry\n          }&q=${this.state.toquery}&category=${\n            this.state.forCategory\n          }&pageSize=20&apiKey=${this.state.api_key}`\n        );\n        this.setState(\n          { articles: res.data.articles, loadingcheck: true },\n          () => {\n            if (localStorage.getItem(\"backupdata\") === true) {\n              // init variable/set default variable for item\n              console.log(\" backupdata\");\n              console.log(localStorage.getItem(\"backupdata\"));\n            }\n            localStorage.setItem(\n              \"backupdata\",\n              JSON.stringify(this.state.articles)\n            );\n            localStorage.setItem(\"forCountry\", this.state.forCountry);\n            localStorage.setItem(\"forCategory\", this.state.forCategory);\n            localStorage.setItem(\"toquery\", this.state.toquery);\n            localStorage.setItem(\"CountryValue\", this.state.CountryValue);\n            localStorage.setItem(\"CategoryValue\", this.state.CategoryValue);\n            localStorage.setItem(\"query\", this.state.query);\n          }\n        );\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({\n          error: err,\n          loadingcheck: true,\n          articles: JSON.parse(localStorage.getItem(\"backupdata\")),\n          forCountry: localStorage.getItem(\"forCountry\"),\n          forCategory: localStorage.getItem(\"forCategory\"),\n          toquery: localStorage.getItem(\"toquery\"),\n          CategoryValue: localStorage.getItem(\"CategoryValue\"),\n          CountryValue: localStorage.getItem(\"CountryValue\"),\n          query: localStorage.getItem(\"query\")\n        });\n      });\n  };\n\n  onChange = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  handleCategoryDropdownChange = event => {\n    if (this.state.error) {\n      alert(\"Connect to the Network\");\n    } else {\n      this.setState({ loadingcheck: false });\n      console.log(event.target.value);\n      this.setState({ CategoryValue: event.target.value }, () => {\n        console.log(this.state.CategoryValue);\n        this.setState({ forCategory: `${this.state.CategoryValue}` });\n      });\n    }\n  };\n\n  handleCountryDropdownChange = event => {\n    if (this.state.error) {\n      alert(\"Connect to the Network\");\n    } else {\n      this.setState({ loadingcheck: false });\n      console.log(event.target.value);\n      this.setState({ CountryValue: event.target.value }, () => {\n        console.log(this.state.CountryValue);\n        this.setState({ forCountry: `${this.state.CountryValue}` });\n      });\n    }\n  };\n\n  render() {\n    const Category = [\n      {\n        value: \"business\",\n        name: \"Business\"\n      },\n      {\n        value: \"entertainment\",\n        name: \"Entertainment\"\n      },\n      {\n        value: \"general\",\n        name: \"General\"\n      },\n      {\n        value: \"health\",\n        name: \"Health\"\n      },\n      {\n        value: \"science\",\n        name: \"Science\"\n      },\n      {\n        value: \"sports\",\n        name: \"Sports\"\n      },\n      {\n        value: \"technology\",\n        name: \"Technology\"\n      }\n    ];\n    const Country = [\n      {\n        value: \"in\",\n        name: \"India\"\n      },\n      {\n        value: \"us\",\n        name: \"Usa\"\n      },\n      {\n        value: \"au\",\n        name: \"Australia\"\n      },\n      {\n        value: \"ca\",\n        name: \"Canada\"\n      },\n      {\n        value: \"ch\",\n        name: \"China\"\n      }\n    ];\n    return (\n      <Consumer>\n        {value => {\n          const { dispatch } = value;\n          return (\n            <div className=\"container\">\n              <form onSubmit={this.findArticle.bind(this, dispatch)}>\n                <div className=\"form-row align-items-center\">\n                  <div className=\"col-sm-3 my-1\">\n                    <select\n                      className=\"form-control\"\n                      name=\"CountryValue\"\n                      value={this.state.CountryValue}\n                      onChange={this.handleCountryDropdownChange}\n                    >\n                      {Country.map(o => (\n                        <option key={o.value} value={o.value}>\n                          {o.name}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                  <div className=\"col-sm-3 my-1\">\n                    <select\n                      className=\"form-control\"\n                      name=\"CategoryValue\"\n                      value={this.setState.CategoryValue}\n                      onChange={this.handleCategoryDropdownChange}\n                    >\n                      {Category.map(o => (\n                        <option key={o.value} value={o.value}>\n                          {o.name}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n                <div className=\"form-row align-items-center\">\n                  <div className=\"col-sm-3 my-1\">\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      placeholder=\"Search\"\n                      name=\"toquery\"\n                      style={{\"width\" : \"100%\"}}\n                      value={this.state.toquery}\n                      onChange={this.onChange}\n                    />\n                  </div>\n                  <div className=\"col-sm-3 my-1\">\n                    <button className=\"btn btn-success form-control\" style={{\"width\" : \"100%\"}} type=\"submit\">\n                      Get Articles\n                    </button>\n                  </div>\n                </div>\n              </form>\n            </div>\n          );\n        }}\n      </Consumer>\n    );\n  }\n}\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}